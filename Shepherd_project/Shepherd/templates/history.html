{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My History</title>
    <link rel="icon" type="image/x-icon" href="/static/Shepherd_Logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"
        integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/homestylesheet.css">
    {% comment %} <link rel="stylesheet" href="/static/css/style.css"> {% endcomment %}
</head>

<body>
    <!--Main Navigation-->
    <header>
        <!-- Sidebar -->
        <nav id="sidebarMenu" class="collapse d-lg-block sidebar collapse bg-custom">
            <div class="position-sticky">
              <div class="list-group list-group-flush mx-3 mt-4">
                    <a href="{% url 'home' %}" class="list-group-item list-group-item-action-custom py-2 ripple " aria-current="true">
                  <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>Feed</span>
                </a>
                <a href="{% url 'leaderboard' %}" class="list-group-item list-group-item-action-custom py-2 ripple "
                  aria-current="true">
                  <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>Leaderboard</span>
                </a>
                <a href="{% url 'manual' %}" class="list-group-item list-group-item-action-custom py-2 ripple">
                  <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>Enter Points</span></a>
      
                <a hidden href="#" class="list-group-item list-group-item-action py-2 ripple ">
                  <i class="fas fa-chart-area fa-fw me-3"></i><span>Share offer</span></a>
      
                <a href="{% url 'history' %}" class="list-group-item list-group-item-action-custom py-2 ripple active">
                  <i class="fas fa-lock fa-fw me-3"></i><span>My history</span></a>
      
                <a hidden href="#" class="list-group-item list-group-item-action py-2 ripple"><i
                    class="fas fa-chart-line fa-fw me-3"></i><span>Account</span></a>
      
                <a hidden href="#" class="list-group-item list-group-item-action py-2 ripple">
                  <i class="fas fa-chart-pie fa-fw me-3"></i><span>Settings</span></a>
                  
                <a href="{% url 'logout' %}" class="list-group-item list-group-item-action-custom py-2 ripple">
                  <i class="fas fa-chart-pie fa-fw me-3"></i><span>Logout</span>
                </a>
      
                <!-- Trigger the modal with a button -->
                <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Daily Reward</button>
      
                <!--Info PopUp-->
                <div class="popup" onclick="myFunction()">
                  <svg fill="#317589" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="64px" height="64px" viewBox="-166.79 -166.79 750.56 750.56" xml:space="preserve" stroke="#317589" stroke-width="0.0041697900000000005">
                    <g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(72.97132499999998,72.97132499999998), scale(0.65)">
                      <rect x="-166.79" y="-166.79" width="750.56" height="750.56" rx="375.28" fill="#f2f0ed" strokewidth="0"></rect></g>
                      <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="7.505622"></g>
                      <g id="SVGRepo_iconCarrier"> <g> 
                        <path d="M356.004,61.156c-81.37-81.47-213.377-81.551-294.848-0.182c-81.47,81.371-81.552,213.379-0.181,294.85 c81.369,81.47,213.378,81.551,294.849,0.181C437.293,274.636,437.375,142.626,356.004,61.156z M237.6,340.786 c0,3.217-2.607,5.822-5.822,5.822h-46.576c-3.215,0-5.822-2.605-5.822-5.822V167.885c0-3.217,2.607-5.822,5.822-5.822h46.576 c3.215,0,5.822,2.604,5.822,5.822V340.786z M208.49,137.901c-18.618,0-33.766-15.146-33.766-33.765 c0-18.617,15.147-33.766,33.766-33.766c18.619,0,33.766,15.148,33.766,33.766C242.256,122.755,227.107,137.901,208.49,137.901z" alt = "Info"></path>
                 </g> 
                  </g>
                  </svg>
                 <span class="popuptext" id="myPopup">Keep track of your spending here.</span>
                </div>
      
                <div class="audioIcon" id="audioContainer">
                  <audio hidden controls>
                      <source src="{% static 'My History.mp3' %}" type="audio/mpeg">
                      Your browser does not support the audio element.
                  </audio>
                  <svg width="64px" height="64px" viewBox="0 0 24.00 24.00" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#f2f0ed" stroke-width="0.00024000000000000003">
                    <g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(0,0), scale(1)">
                      <rect x="0" y="0" width="24.00" height="24.00" rx="12" fill="#317589" strokewidth="0">
                      </rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.048"></g>
                      <g id="SVGRepo_iconCarrier"> 
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12.0002 9C13.1048 9 14.0002 8.10457 14.0002 7C14.0002 5.89543 13.1048 5 12.0002 5C10.8956 5 10.0002 5.89543 10.0002 7C10.0002 8.10457 10.8956 9 12.0002 9ZM6.29284 9.30945C5.91154 9.14785 5.4714 9.3259 5.30971 9.7072C5.148 10.0885 5.32605 10.5288 5.70739 10.6905L5.70871 10.691L5.71133 10.6921L5.72038 10.696L5.75338 10.7097C5.78186 10.7215 5.82313 10.7385 5.87608 10.7599C5.98193 10.8026 6.13459 10.8631 6.32498 10.9355C6.70531 11.08 7.23854 11.2726 7.85162 11.4654C8.84049 11.7765 10.088 12.1049 11.2502 12.2131V13.4522C11.2502 13.8837 11.1262 14.306 10.8928 14.6689L8.36931 18.5944C8.14532 18.9429 8.2462 19.4069 8.59463 19.6309C8.94305 19.8549 9.40709 19.754 9.63108 19.4056L12.0002 15.7203L14.3693 19.4056C14.5933 19.754 15.0573 19.8549 15.4058 19.6309C15.7542 19.4069 15.8551 18.9429 15.6311 18.5944L13.1075 14.6689C12.8742 14.306 12.7502 13.8837 12.7502 13.4522V12.2131C13.9124 12.1049 15.1599 11.7765 16.1488 11.4654C16.7619 11.2726 17.2951 11.08 17.6754 10.9355C17.8658 10.8631 18.0185 10.8026 18.1243 10.7599C18.1773 10.7385 18.2185 10.7215 18.247 10.7097L18.28 10.696L18.2891 10.6921L18.2917 10.691L18.2928 10.6906C18.6741 10.5289 18.8524 10.0885 18.6907 9.7072C18.529 9.3259 18.0887 9.1479 17.7074 9.30952L17.6999 9.31266L17.6727 9.32399C17.6482 9.33416 17.6111 9.34942 17.5625 9.36905C17.4653 9.40832 17.3223 9.465 17.1426 9.53328C16.7828 9.67002 16.2777 9.85241 15.6987 10.0346C14.5205 10.4052 13.1114 10.75 12.0002 10.75C10.8889 10.75 9.47991 10.4052 8.30172 10.0346C7.72264 9.85241 7.21763 9.67002 6.85776 9.53328C6.67806 9.465 6.53512 9.40832 6.43791 9.36905C6.38932 9.34942 6.3522 9.33416 6.32767 9.32399L6.30046 9.31266L6.2942 9.31003L6.29284 9.30945Z" fill="#f2f0ed"></path>
                   </g></svg> 
              </div>
          </nav>
                <!--Info Popup-->
                <div class="popup" onclick="myFunction()">
                    <svg fill="#317589" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="64px" height="64px" viewBox="-166.79 -166.79 750.56 750.56" xml:space="preserve" stroke="#317589" stroke-width="0.0041697900000000005">
                      <g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(72.97132499999998,72.97132499999998), scale(0.65)">
                        <rect x="-166.79" y="-166.79" width="750.56" height="750.56" rx="375.28" fill="#f2f0ed" strokewidth="0"></rect></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="7.505622"></g>
                        <g id="SVGRepo_iconCarrier"> <g> 
                          <path d="M356.004,61.156c-81.37-81.47-213.377-81.551-294.848-0.182c-81.47,81.371-81.552,213.379-0.181,294.85 c81.369,81.47,213.378,81.551,294.849,0.181C437.293,274.636,437.375,142.626,356.004,61.156z M237.6,340.786 c0,3.217-2.607,5.822-5.822,5.822h-46.576c-3.215,0-5.822-2.605-5.822-5.822V167.885c0-3.217,2.607-5.822,5.822-5.822h46.576 c3.215,0,5.822,2.604,5.822,5.822V340.786z M208.49,137.901c-18.618,0-33.766-15.146-33.766-33.765 c0-18.617,15.147-33.766,33.766-33.766c18.619,0,33.766,15.148,33.766,33.766C242.256,122.755,227.107,137.901,208.49,137.901z" alt = "Info"></path>
                   </g> 
                    </g>
                    </svg>
                   <span class="popuptext" id="myPopup">Keep track of your spending here!</span>
                  </div>
        
                  <div class="audioIcon" id="audioContainer">
                    <audio hidden controls>
                        <source src="{% static 'My History.mp3' %}" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                    <svg width="64px" height="64px" viewBox="0 0 24.00 24.00" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#f2f0ed" stroke-width="0.00024000000000000003">
                      <g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(0,0), scale(1)">
                        <rect x="0" y="0" width="24.00" height="24.00" rx="12" fill="#317589" strokewidth="0">
                        </rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.048"></g>
                        <g id="SVGRepo_iconCarrier"> 
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12.0002 9C13.1048 9 14.0002 8.10457 14.0002 7C14.0002 5.89543 13.1048 5 12.0002 5C10.8956 5 10.0002 5.89543 10.0002 7C10.0002 8.10457 10.8956 9 12.0002 9ZM6.29284 9.30945C5.91154 9.14785 5.4714 9.3259 5.30971 9.7072C5.148 10.0885 5.32605 10.5288 5.70739 10.6905L5.70871 10.691L5.71133 10.6921L5.72038 10.696L5.75338 10.7097C5.78186 10.7215 5.82313 10.7385 5.87608 10.7599C5.98193 10.8026 6.13459 10.8631 6.32498 10.9355C6.70531 11.08 7.23854 11.2726 7.85162 11.4654C8.84049 11.7765 10.088 12.1049 11.2502 12.2131V13.4522C11.2502 13.8837 11.1262 14.306 10.8928 14.6689L8.36931 18.5944C8.14532 18.9429 8.2462 19.4069 8.59463 19.6309C8.94305 19.8549 9.40709 19.754 9.63108 19.4056L12.0002 15.7203L14.3693 19.4056C14.5933 19.754 15.0573 19.8549 15.4058 19.6309C15.7542 19.4069 15.8551 18.9429 15.6311 18.5944L13.1075 14.6689C12.8742 14.306 12.7502 13.8837 12.7502 13.4522V12.2131C13.9124 12.1049 15.1599 11.7765 16.1488 11.4654C16.7619 11.2726 17.2951 11.08 17.6754 10.9355C17.8658 10.8631 18.0185 10.8026 18.1243 10.7599C18.1773 10.7385 18.2185 10.7215 18.247 10.7097L18.28 10.696L18.2891 10.6921L18.2917 10.691L18.2928 10.6906C18.6741 10.5289 18.8524 10.0885 18.6907 9.7072C18.529 9.3259 18.0887 9.1479 17.7074 9.30952L17.6999 9.31266L17.6727 9.32399C17.6482 9.33416 17.6111 9.34942 17.5625 9.36905C17.4653 9.40832 17.3223 9.465 17.1426 9.53328C16.7828 9.67002 16.2777 9.85241 15.6987 10.0346C14.5205 10.4052 13.1114 10.75 12.0002 10.75C10.8889 10.75 9.47991 10.4052 8.30172 10.0346C7.72264 9.85241 7.21763 9.67002 6.85776 9.53328C6.67806 9.465 6.53512 9.40832 6.43791 9.36905C6.38932 9.34942 6.3522 9.33416 6.32767 9.32399L6.30046 9.31266L6.2942 9.31003L6.29284 9.30945Z" fill="#f2f0ed"></path>
                     </g></svg> 
                    
            </div>
        </nav>
        <!-- Sidebar -->

        <!-- Navbar -->
        <!-- Navbar -->
    <nav id="main-navbar" class="navbar navbar-expand-lg navbar-light bg-custom fixed-top">
        <!-- Container wrapper -->
        <div class="container-fluid">
          <!-- Toggle button -->
          <button class="navbar-toggler" type="button" data-mdb-toggle="collapse" data-mdb-target="#sidebarMenu"
            aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
          </button>
  
          <!-- Brand -->
          <a class="navbar-brand-custom" href="{% url 'home' %}">
            <img src="/static/Shepherd_Logo.png" height="60" alt="Logo" loading="lazy" />
          </a>
  
  <div class="searchBox">
    <form action="{% url 'product' %}" class="searchform" method="POST">
      {% csrf_token %}
      <input class = "searchinput" type="search" name="search_query" placeholder="Search Products.....">
      <button  type="submit" style = "border:0;">
        <i class="fa fa-search">
          <svg viewBox="0 0 512 512" width="25" title="search">
            <path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z" />
          </svg>
        </i>
        </button>
     </form>
    </div>
  
          <!-- Right links -->
          <ul hidden class="navbar-nav ms-auto d-flex flex-row">
            <!-- Notification dropdown -->
            <li hidden class="nav-item dropdown">
              <a class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow" href="#" id="navbarDropdownMenuLink"
                role="button" data-mdb-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-bell"></i>
                <span class="badge rounded-pill badge-notification bg-danger">1</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                <li>
                  <a class="dropdown-item" href="#">Some news</a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">Another news</a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </li>
  
            <!-- Icon -->
                  <li class="nav-item">
              <a class="nav-link me-3 me-lg-0" href="#">
                <i class="fas fa-fill-drip"></i>
              </a>
            </li>
            <!-- Icon -->
                  <li class="nav-item me-3 me-lg-0">
              <a class="nav-link" href="#">
                <i class="fab fa-github"></i>
              </a>
            </li>
  
            <!-- Icon dropdown -->
            <li hidden class="nav-item dropdown">
              <a class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow" href="#" id="navbarDropdown" role="button"
                data-mdb-toggle="dropdown" aria-expanded="false">
                <i class="flag-united-kingdom flag m-0"></i>
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                <li>
                  <a class="dropdown-item" href="#"><i class="flag-united-kingdom flag"></i>English
                    <i class="fa fa-check text-success ms-2"></i></a>
                </li>
                <li>
                  <hr class="dropdown-divider" />
                </li>
                <li>
                  <a class="dropdown-item" href="#"><i class="flag-poland flag"></i>Polski</a>
                </li>
                <li>
                  <a class="dropdown-item" href="#"><i class="flag-japan flag"></i>日本語</a>
                </li>
              </ul>
            </li>
  
            <!-- Avatar -->
            <li hidden class="nav-item dropdown">
              <a class="nav-link dropdown-toggle hidden-arrow d-flex align-items-center" href="#"
                id="navbarDropdownMenuLink" role="button" data-mdb-toggle="dropdown" aria-expanded="false">
                          <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img (31).webp" class="rounded-circle"
                              height="22" alt="Avatar" loading="lazy" />
              </a>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                <li>
                  <a class="dropdown-item" href="#">My profile</a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">Settings</a>
                </li>
                <li>
                  <a class="dropdown-item" href="#">Logout</a>
                </li>
              </ul>
            </li>
          </ul>
    
        </div>
        <!-- Container wrapper -->
      </nav>
        <!-- End of Navbar -->
        {% comment %} {% if user.is_authenticated %}
                <p>
                  Welcome {{ user.first_name }}. You have {{ mypoints|default:'no' }} points.
                </p>
                {% endif %}    {% endcomment %}
    </header>
    <!-- End of Main Navigation-->

    <!--Main layout-->
    <main style="margin-top: 58px;">
        <div class="container pt-4">
            <br>
            <h1>My History</h1>

            <table class="table">
                <thead>
                    <tr>
                        <th class="col-3">Date</th>
                        <th class="col-3">Shop</th>
                        <th class="col-4">Description</th>
                        <th class="col-2">Cost</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in my_orders %}
                    <tr>
                        <td>
                            <div class="d-flex align-items-center">
                                <div class="user-info__basic">
                                    <h5 class="mb-0">{{ order.date }}</h5>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="d-flex align-items-baseline">
                                <h4 class="mr-1">{{ order.shop }}</h4>
                            </div>
                        </td>
                        <td>
                            <div class="d-flex align-items-baseline">
                                <h4 class="mr-1">{{ order.description }}</h4>
                            </div>
                        </td>
                        <td>
                            <div class="d-flex justify-content-center">
                                <small class="text-muted text-decoration-line-through">&euro;{{ order.money_before }}</small>
                                <span class="mr-1">&euro;   {{ order.money_after }}</span>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </main>
    <!--End of Main layout-->
</body>
<script>
    function myFunction() {
      var popup = document.getElementById("myPopup");
      popup.classList.toggle("show");
    }
    document.addEventListener('DOMContentLoaded', function () {
      var audioContainer = document.getElementById('audioContainer');
      var audioElement = audioContainer.querySelector('audio');
    
      // SVG icon element
      var svgIcon = audioContainer.querySelector('svg');
    
      // Add click event listener to the SVG icon
      svgIcon.addEventListener('click', function () {
          if (audioElement.paused) {
              audioElement.play();
          } else {
              audioElement.pause();
          }
      });
    });
    </script>
</html>